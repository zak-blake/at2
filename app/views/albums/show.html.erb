<!-- Page Content -->

<%= content_for :breadcrumbs do %>
  <li><%= link_to 'Home', root_path %></li>
  <li><%= link_to @user.full_name, user_path(@user.id) %></li>
  <li><%= link_to @album.title, "#" %>
<% end %>

<div class="container">
  <% if @edit_mode || @admin_mode %>
        <div class="btn-group" role="group" aria-label>
          <%= link_to 'Edit Album', edit_album_path(@album), class: "btn btn-default" %>
          <%= link_to 'Delete Album', album_path(@album), method: :delete, class: "btn btn-default", data: { confirm: "Delete This Album?" } %>
        </div>
  <% end %>

  <div class="row">
      <div class="col-lg-12">
          <h1 class="page-header">
            <%= @album.title %>
            <% if @edit_mode || @admin_mode %>
              (Priority: <%= @album.priority %>)
            <% end %>
            <small><%= @user.full_name %></small>
          </h1>
      </div>
  </div>

  <% if @edit_mode || @admin_mode %>
    <p>Artworks are displayed in decreasing order of priority</p>
  <% end %>

  <% count = 0 %>
  <% Piece.where(album_id: @album.id).order("priority DESC").in_groups_of(4, false) do |group| %>
    <div class="row">

      <% group.each do |a| %>
        <% count += 1 %>
        <div class="col-md-3 portfolio-item">
          <%= link_to piece_path(a.id) do %>
            <%= image_tag( a.image.url(:grid_view), { class: "img-responsive" } ) %>
          <% end %>
        </div>
      <% end %>

    </div>
  <% end %>

  <% if count <= 0 %>
    <center><h3>No Artwork Posted Yet</h3></center>
  <% end %>
  <hr>
  <p><%= @album.description %></p>


  <div class="text-center">
    <div class="btn-group" role="group" aria-label="...">
      <% if @edit_mode || @admin_mode %>
        <%= link_to 'Add Artwork', new_piece_path(parent_id: @album.id), class: "btn btn-default" %>
      <% else %>
        <%= link_to 'Contact This Artist', root_path, class: "btn btn-default" %>
      <% end %>
    </div>
  </div>
</div>
